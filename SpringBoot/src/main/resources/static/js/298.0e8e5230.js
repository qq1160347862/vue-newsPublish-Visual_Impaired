"use strict";(self["webpackChunkspringboot_vue_demo"]=self["webpackChunkspringboot_vue_demo"]||[]).push([[298],{3298:function(e,l,a){a.r(l),a.d(l,{default:function(){return _}});var t=a(3396);const o={class:"home",style:{"padding-left":"10px","padding-right":"10px","padding-bottom":"10px",margin:"50px 10px 0 10px"}},i={style:{display:"flex",position:"relative"}},s={style:{margin:"10px 0",position:"relative"}},n=(0,t.Uk)("新增"),r={style:{margin:"10px 0",position:"absolute",left:"80%"}},d=(0,t.Uk)("查询"),m=(0,t.Uk)("详情"),u=(0,t.Uk)("编辑"),p=(0,t.Uk)("删除"),g={class:"dialog-footer"},h=(0,t.Uk)("取消"),c=(0,t.Uk)("确认"),f=["innerHTML"];function b(e,l,a,b,w,y){const C=(0,t.up)("el-button"),k=(0,t.up)("el-input"),_=(0,t.up)("el-pagination"),W=(0,t.up)("el-table-column"),V=(0,t.up)("el-popconfirm"),z=(0,t.up)("el-table"),v=(0,t.up)("el-form-item"),x=(0,t.up)("el-form"),U=(0,t.up)("el-dialog"),S=(0,t.up)("el-card");return(0,t.wg)(),(0,t.iD)("div",o,[(0,t._)("div",i,[(0,t._)("div",s,[(0,t.Wm)(C,{type:"primary",onClick:l[0]||(l[0]=e=>y.add())},{default:(0,t.w5)((()=>[n])),_:1})]),(0,t._)("div",r,[(0,t.Wm)(k,{modelValue:w.search,"onUpdate:modelValue":l[1]||(l[1]=e=>w.search=e),clearable:"",placeholder:"请输入内容",style:{width:"60%"}},null,8,["modelValue"]),(0,t.Wm)(C,{type:"primary",onClick:y.load},{default:(0,t.w5)((()=>[d])),_:1},8,["onClick"])])]),(0,t._)("div",null,[(0,t.Wm)(_,{currentPage:w.currentPage,"onUpdate:currentPage":l[2]||(l[2]=e=>w.currentPage=e),"page-size":w.pageSize,"onUpdate:page-size":l[3]||(l[3]=e=>w.pageSize=e),small:w.small,disabled:w.disabled,background:w.background,"page-sizes":[5,10,20],layout:"total, sizes, prev, pager, next, jumper",total:w.total,onSizeChange:y.handleSizeChange,onCurrentChange:y.handleCurrentChange},null,8,["currentPage","page-size","small","disabled","background","total","onSizeChange","onCurrentChange"])]),(0,t.Wm)(z,{data:w.tableData,border:"",style:{width:"100%"},height:"calc(100vh - 200px)"},{default:(0,t.w5)((()=>[(0,t.Wm)(W,{prop:"newId",label:"新闻ID",sortable:"",width:"100"}),(0,t.Wm)(W,{prop:"type",label:"标签",width:"150"}),(0,t.Wm)(W,{prop:"author",label:"作者",width:"200"}),(0,t.Wm)(W,{prop:"title",label:"新闻标题"}),(0,t.Wm)(W,{prop:"pubtime",label:"发布时间",width:"200"}),(0,t.Wm)(W,{fixed:"right",label:"操作",width:"150"},{default:(0,t.w5)((l=>[(0,t.Wm)(C,{link:"",type:"primary",size:"small",onClick:e=>y.details(l.row.content)},{default:(0,t.w5)((()=>[m])),_:2},1032,["onClick"]),(0,t.Wm)(C,{link:"",type:"primary",size:"small",onClick:e=>y.handleEdit(l.row)},{default:(0,t.w5)((()=>[u])),_:2},1032,["onClick"]),(0,t.Wm)(V,{onConfirm:e=>y.handleDelete(l.row.newId),"confirm-button-text":"确认","cancel-button-text":"取消",icon:e.InfoFilled,"icon-color":"#626AEF",title:"确认删除?"},{reference:(0,t.w5)((()=>[(0,t.Wm)(C,{link:"",type:"primary",size:"small"},{default:(0,t.w5)((()=>[p])),_:1})])),_:2},1032,["onConfirm","icon"])])),_:1})])),_:1},8,["data"]),(0,t._)("div",null,[(0,t.Wm)(_,{currentPage:w.currentPage,"onUpdate:currentPage":l[4]||(l[4]=e=>w.currentPage=e),"page-size":w.pageSize,"onUpdate:page-size":l[5]||(l[5]=e=>w.pageSize=e),small:w.small,disabled:w.disabled,background:w.background,"page-sizes":[5,10,20],layout:"total, sizes, prev, pager, next, jumper",total:w.total,onSizeChange:y.handleSizeChange,onCurrentChange:y.handleCurrentChange},null,8,["currentPage","page-size","small","disabled","background","total","onSizeChange","onCurrentChange"])]),(0,t.Wm)(U,{modelValue:w.dialogVisible,"onUpdate:modelValue":l[11]||(l[11]=e=>w.dialogVisible=e),title:"Tips",width:"50%"},{footer:(0,t.w5)((()=>[(0,t._)("span",g,[(0,t.Wm)(C,{onClick:l[10]||(l[10]=e=>w.dialogVisible=!1)},{default:(0,t.w5)((()=>[h])),_:1}),(0,t.Wm)(C,{type:"primary",onClick:y.save},{default:(0,t.w5)((()=>[c])),_:1},8,["onClick"])])])),default:(0,t.w5)((()=>[(0,t.Wm)(x,{"label-width":"120px",rules:w.rules,model:w.form,ref:"form"},{default:(0,t.w5)((()=>[(0,t.Wm)(v,{label:"新闻标题",prop:"title"},{default:(0,t.w5)((()=>[(0,t.Wm)(k,{modelValue:w.form.title,"onUpdate:modelValue":l[6]||(l[6]=e=>w.form.title=e),style:{width:"50%"}},null,8,["modelValue"])])),_:1}),(0,t.Wm)(v,{label:"新闻分类"},{default:(0,t.w5)((()=>[(0,t.Wm)(k,{modelValue:w.form.type,"onUpdate:modelValue":l[7]||(l[7]=e=>w.form.type=e),style:{width:"50%"}},null,8,["modelValue"])])),_:1}),(0,t.Wm)(v,{label:"作者"},{default:(0,t.w5)((()=>[(0,t.Wm)(k,{modelValue:w.form.author,"onUpdate:modelValue":l[8]||(l[8]=e=>w.form.author=e),style:{width:"50%"}},null,8,["modelValue"])])),_:1}),(0,t.Wm)(v,{label:"新闻内容",prop:"content"},{default:(0,t.w5)((()=>[(0,t.Wm)(k,{type:"textarea",modelValue:w.form.content,"onUpdate:modelValue":l[9]||(l[9]=e=>w.form.content=e),style:{width:"80%"}},null,8,["modelValue"])])),_:1})])),_:1},8,["rules","model"])])),_:1},8,["modelValue"]),(0,t.Wm)(U,{title:"详情",modelValue:w.vis,"onUpdate:modelValue":l[12]||(l[12]=e=>w.vis=e),width:"50%"},{default:(0,t.w5)((()=>[(0,t.Wm)(S,null,{default:(0,t.w5)((()=>[(0,t._)("div",{innerHTML:w.detail,style:{"min-height":"400px"}},null,8,f)])),_:1})])),_:1},8,["modelValue"])])}var w=a(4471),y={name:"HomeView",components:{},data(){return{form:{},rules:{title:[{required:!0,message:"请输入新闻标题",trigger:"blur"}],content:[{required:!0,message:"请输入新闻内容",trigger:"blur"}]},search:"",total:0,currentPage:1,pageSize:20,disabled:!1,small:!1,background:!1,dialogVisible:!1,vis:!1,tableData:[],detail:""}},created(){this.load()},methods:{load(){w.Z.get("/news",{params:{pageNum:this.currentPage,pageSize:this.pageSize,search:this.search}}).then((e=>{console.log(e),this.tableData=e.data.records,console.log(e.data),console.log(e.data.records),this.total=e.data.total}))},add(){this.dialogVisible=!0,this.form={}},save(){this.$refs["form"].validate((e=>{e&&(this.form.newId?(console.log(this.form.newId),w.Z.put("/news",this.form).then((e=>{console.log(e),"0"===e.code?this.$message({type:"success",message:"更新成功"}):this.$message({type:"error",message:e.msg})}))):(console.log(this.form.newId),w.Z.post("/news",this.form).then((e=>{console.log(e),"0"===e.code?this.$message({type:"success",message:"新增成功"}):this.$message({type:"error",message:e.msg})}))),this.load(),this.dialogVisible=!1)}))},details(e){this.detail=e,this.vis=!0},handleEdit(e){this.form=JSON.parse(JSON.stringify(e)),this.dialogVisible=!0},handleDelete(e){console.log(e),w.Z["delete"]("/news/"+e).then((e=>{"0"===e.code?this.$message({type:"success",message:"删除成功"}):this.$message({type:"error",message:e.msg}),this.load()}))},handleSizeChange(){this.load()},handleCurrentChange(){this.load()}}},C=a(89);const k=(0,C.Z)(y,[["render",b],["__scopeId","data-v-31f53ce2"]]);var _=k}}]);
//# sourceMappingURL=298.0e8e5230.js.map